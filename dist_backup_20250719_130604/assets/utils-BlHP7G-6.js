var R=Object.defineProperty;var I=(s,o,e)=>o in s?R(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e;var m=(s,o,e)=>I(s,typeof o!="symbol"?o+"":o,e);import{d as D}from"./hooks-Dh4rj4GA.js";import{h as g,t as u,F as y,r as E,k as C,f as k,q as w,w as b}from"./firebase-vendor-DqmTlSD9.js";import{d as f}from"./admin-pages-NPVKbNvB.js";import{a as v}from"./components-DnyS3Eh5.js";const z=s=>{try{return typeof window>"u"?(console.log("â„¹ï¸ Analytics: Ambiente nÃ£o suportado (SSR)"),!1):window.gtag?(window.gtag("config",s,{cookie_domain:window.location.hostname,cookie_flags:"SameSite=None;Secure",anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1,send_page_view:!0,page_title:document.title,page_location:window.location.href}),console.log("âœ… Analytics inicializado com sucesso"),!0):(console.log("â„¹ï¸ Analytics: gtag nÃ£o disponÃ­vel"),!1)}catch(o){return console.warn("âš ï¸ Erro ao inicializar Analytics:",o),!1}},_=(s,o,e=30)=>{try{const t=new Date;t.setTime(t.getTime()+e*24*60*60*1e3);const a=`${s}=${o};expires=${t.toUTCString()};path=/;SameSite=None;Secure`;document.cookie=a,console.log("ğŸª Cookie definido:",s)}catch(t){console.warn("âš ï¸ Erro ao definir cookie:",t)}},S=s=>{var o;try{const t=`; ${document.cookie}`.split(`; ${s}=`);return t.length===2&&((o=t.pop())==null?void 0:o.split(";").shift())||null}catch(e){return console.warn("âš ï¸ Erro ao ler cookie:",e),null}},L=s=>{try{document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,console.log("ğŸª Cookie removido:",s)}catch(o){console.warn("âš ï¸ Erro ao remover cookie:",o)}},P=()=>{try{const s="test_cookie_support";_(s,"1",1);const o=S(s)!==null;return L(s),o}catch(s){return console.warn("âš ï¸ Cookies nÃ£o suportados:",s),!1}},j=()=>{try{return S("cookies_accepted")?P()?!0:(console.log("â„¹ï¸ Cookies nÃ£o suportados neste navegador"),!1):(console.log("â„¹ï¸ Aguardando aceitaÃ§Ã£o de cookies para Analytics"),!1)}catch(s){return console.warn("âš ï¸ Erro ao configurar privacidade:",s),!1}},d=class d{constructor(){m(this,"pwaHook")}static getInstance(){return d.instance||(d.instance=new d),d.instance}setPWAHook(o){this.pwaHook=o}async saveOfflineAction(o,e){var t;try{const a={type:o,data:e,timestamp:Date.now(),sessionId:this.getSessionId(),userId:this.getUserId(),synced:!1};await this.saveToIndexedDB("offlineActions",a),(t=this.pwaHook)==null||t.trackEvent("offline_action_saved",{action:o,timestamp:Date.now()}),console.log("âœ… AÃ§Ã£o offline salva:",o)}catch(a){throw console.error("âŒ Erro ao salvar aÃ§Ã£o offline:",a),a}}async saveGamificationAction(o){var e;try{const t={...o,timestamp:Date.now(),sessionId:this.getSessionId(),userId:this.getUserId(),synced:!1};await this.saveToIndexedDB("gamificationActions",t),(e=this.pwaHook)==null||e.trackEvent("gamification_action_offline",{type:o.type,timestamp:Date.now()}),console.log("âœ… AÃ§Ã£o de gamificaÃ§Ã£o offline salva:",o.type)}catch(t){throw console.error("âŒ Erro ao salvar gamificaÃ§Ã£o offline:",t),t}}async syncOfflineActions(){var o;try{const e=await this.getOfflineActions(),t=await this.getGamificationActions();if(e.length===0&&t.length===0){console.log("â„¹ï¸ Nenhuma aÃ§Ã£o offline para sincronizar");return}console.log(`ğŸ”„ Sincronizando ${e.length} aÃ§Ãµes offline...`);for(const a of t)await this.processGamificationAction(a);for(const a of e)await this.processOfflineAction(a);await this.clearSyncedActions(),console.log("âœ… AÃ§Ãµes offline sincronizadas com sucesso!"),(o=this.pwaHook)==null||o.trackEvent("offline_actions_synced",{count:e.length+t.length,timestamp:Date.now()})}catch(e){throw console.error("âŒ Erro ao sincronizar aÃ§Ãµes offline:",e),e}}async processGamificationAction(o){try{switch(o.type){case"token_earned":await this.syncTokenEarned(o);break;case"achievement_unlocked":await this.syncAchievementUnlocked(o);break;case"level_up":await this.syncLevelUp(o);break;case"streak_updated":await this.syncStreakUpdated(o);break;case"challenge_completed":await this.syncChallengeCompleted(o);break;default:console.warn("âš ï¸ Tipo de gamificaÃ§Ã£o desconhecido:",o.type)}}catch(e){console.error(`âŒ Erro ao processar gamificaÃ§Ã£o ${o.type}:`,e)}}async syncTokenEarned(o){console.log("ğŸ’° Sincronizando tokens ganhos:",o.amount)}async syncAchievementUnlocked(o){console.log("ğŸ† Sincronizando achievement:",o.achievement)}async syncLevelUp(o){console.log("ğŸ“ˆ Sincronizando level up:",o.level)}async syncStreakUpdated(o){console.log("ğŸ”¥ Sincronizando streak:",o.streak)}async syncChallengeCompleted(o){console.log("ğŸ¯ Sincronizando challenge:",o.challenge)}async processOfflineAction(o){try{switch(o.type){case"audiovisual_submission":await this.syncAudiovisualSubmission(o);break;case"profile_update":await this.syncProfileUpdate(o);break;case"form_submission":await this.syncFormSubmission(o);break;default:console.warn("âš ï¸ Tipo de aÃ§Ã£o desconhecido:",o.type)}}catch(e){console.error(`âŒ Erro ao processar aÃ§Ã£o ${o.type}:`,e)}}async syncAudiovisualSubmission(o){console.log("ğŸ“¹ Sincronizando submissÃ£o audiovisual offline")}async syncProfileUpdate(o){console.log("ğŸ‘¤ Sincronizando atualizaÃ§Ã£o de perfil offline")}async syncFormSubmission(o){console.log("ğŸ“ Sincronizando submissÃ£o de formulÃ¡rio offline")}async getOfflineActions(){try{const a=(await this.openDB()).transaction(["offlineActions"],"readonly").objectStore("offlineActions").getAll();return new Promise((i,n)=>{a.onsuccess=()=>{const c=a.result||[];i(c.filter(l=>!l.synced))},a.onerror=()=>n(a.error)})}catch(o){return console.error("âŒ Erro ao obter aÃ§Ãµes offline:",o),[]}}async getGamificationActions(){try{const a=(await this.openDB()).transaction(["gamificationActions"],"readonly").objectStore("gamificationActions").getAll();return new Promise((i,n)=>{a.onsuccess=()=>{const c=a.result||[];i(c.filter(l=>!l.synced))},a.onerror=()=>n(a.error)})}catch(o){return console.error("âŒ Erro ao obter gamificaÃ§Ã£o offline:",o),[]}}async clearSyncedActions(){try{const o=await this.openDB(),t=o.transaction(["offlineActions"],"readwrite").objectStore("offlineActions"),a=t.getAll();a.onsuccess=()=>{(a.result||[]).forEach(p=>{p.synced&&t.delete(p.id)})};const n=o.transaction(["gamificationActions"],"readwrite").objectStore("gamificationActions"),c=n.getAll();c.onsuccess=()=>{(c.result||[]).forEach(p=>{p.synced&&n.delete(p.id)})},console.log("ğŸ—‘ï¸ AÃ§Ãµes sincronizadas removidas")}catch(o){console.error("âŒ Erro ao limpar aÃ§Ãµes sincronizadas:",o)}}async hasPendingActions(){try{const o=await this.getOfflineActions(),e=await this.getGamificationActions();return o.length>0||e.length>0}catch(o){return console.error("âŒ Erro ao verificar aÃ§Ãµes pendentes:",o),!1}}async getOfflineStats(){try{const o=await this.getOfflineActions(),e=await this.getGamificationActions(),t=localStorage.getItem("last_offline_sync");return{pendingActions:o.length,pendingGamification:e.length,lastSync:t?parseInt(t):null}}catch(o){return console.error("âŒ Erro ao obter estatÃ­sticas offline:",o),{pendingActions:0,pendingGamification:0,lastSync:null}}}getSessionId(){let o=localStorage.getItem("interbox_session_id");return o||(o=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("interbox_session_id",o)),o}getUserId(){return localStorage.getItem("interbox_user_id")||"anonymous"}async openDB(){return new Promise((o,e)=>{const t=indexedDB.open("InterboxOfflineDB",2);t.onerror=()=>e(t.error),t.onsuccess=()=>o(t.result),t.onupgradeneeded=a=>{const i=a.target.result;if(!i.objectStoreNames.contains("offlineActions")){const n=i.createObjectStore("offlineActions",{keyPath:"id",autoIncrement:!0});n.createIndex("timestamp","timestamp",{unique:!1}),n.createIndex("synced","synced",{unique:!1})}if(!i.objectStoreNames.contains("gamificationActions")){const n=i.createObjectStore("gamificationActions",{keyPath:"id",autoIncrement:!0});n.createIndex("timestamp","timestamp",{unique:!1}),n.createIndex("synced","synced",{unique:!1})}i.objectStoreNames.contains("analytics")||i.createObjectStore("analytics",{keyPath:"id",autoIncrement:!0}).createIndex("timestamp","timestamp",{unique:!1})}})}async saveToIndexedDB(o,e){const n=(await this.openDB()).transaction([o],"readwrite").objectStore(o).add(e);return new Promise((c,l)=>{n.onsuccess=()=>c(n.result),n.onerror=()=>l(n.error)})}};m(d,"instance");let h=d;const r=h.getInstance(),q=()=>{const s=D();return r.setPWAHook(s),{saveOfflineAction:r.saveOfflineAction.bind(r),saveGamificationAction:r.saveGamificationAction.bind(r),syncOfflineActions:r.syncOfflineActions.bind(r),hasPendingActions:r.hasPendingActions.bind(r),getOfflineStats:r.getOfflineStats.bind(r)}},A=[{userName:"JoÃ£o Silva",userPhotoURL:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",points:1250,userRole:"atleta",level:"platina",totalActions:45,streakDays:12},{userName:"Maria Santos",userPhotoURL:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",points:1180,userRole:"atleta",level:"platina",totalActions:38,streakDays:8},{userName:"Pedro Costa",userPhotoURL:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",points:1050,userRole:"jurado",level:"ouro",totalActions:32,streakDays:15},{userName:"Ana Oliveira",userPhotoURL:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",points:920,userRole:"midia",level:"ouro",totalActions:28,streakDays:6},{userName:"Carlos Lima",userPhotoURL:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face",points:850,userRole:"espectador",level:"ouro",totalActions:25,streakDays:10},{userName:"Fernanda Rocha",userPhotoURL:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face",points:780,userRole:"atleta",level:"prata",totalActions:22,streakDays:7},{userName:"Roberto Alves",userPhotoURL:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=150&h=150&fit=crop&crop=face",points:720,userRole:"jurado",level:"prata",totalActions:19,streakDays:9},{userName:"Juliana Costa",userPhotoURL:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=150&h=150&fit=crop&crop=face",points:680,userRole:"midia",level:"prata",totalActions:16,streakDays:5}],X=async()=>{try{console.log("ğŸŒ± Iniciando seed dos dados do leaderboard $BOX...");const s=g(f,"gamification_leaderboard");for(let o=0;o<A.length;o++){const e=A[o],t=u(),a={userId:`user_${o+1}`,userEmail:`${e.userName.toLowerCase().replace(" ",".")}@example.com`,userName:e.userName,userPhotoURL:e.userPhotoURL,userRole:e.userRole,points:e.points,level:e.level,totalActions:e.totalActions,streakDays:e.streakDays,lastActionAt:t,position:o+1,createdAt:t,updatedAt:t,weeklyPoints:Math.floor(e.points*.1),monthlyPoints:Math.floor(e.points*.3),yearlyPoints:e.points,badges:["primeiro_cadastro","ativo"],activeChallenges:[]};await y(s,a),console.log(`âœ… Adicionado: ${e.userName} - ${e.points} $BOX (${e.level})`)}return console.log("ğŸ‰ Seed do leaderboard $BOX concluÃ­do com sucesso!"),!0}catch(s){return console.error("âŒ Erro ao fazer seed dos dados:",s),!1}},B={ingressos:{status:"em_breve",dataAbertura:"2025-07-13T00:00:00-03:00",loteAtual:1,vagasRestantes:500},indicacoes:{total:0,hoje:0},fotografos:{total:0,aprovados:0},token:{box:{total:0,media:0,holders:0,marketCap:0}},mostrarNaHome:{ingressos:!0,token:!0,indicacoes:!1,fotografos:!1}},G=async()=>{try{return console.log("ğŸŒ± Iniciando seed dos dados de configuraÃ§Ã£o..."),await E(C(f,"config","tempo_real"),{...B,createdAt:u(),updatedAt:u()}),console.log("âœ… ConfiguraÃ§Ã£o tempo_real criada com sucesso!"),console.log("ğŸ“Š Dados iniciais:"),console.log("- Ingressos: Em breve (abertura: 13/07/2025)"),console.log("- Vagas restantes: 500"),console.log("- Mostrar na home: Apenas ingressos e tokens $BOX"),console.log("- Token $BOX: 0 distribuÃ­do, 0 holders"),!0}catch(s){return console.error("âŒ Erro ao criar configuraÃ§Ã£o:",s),!1}},O=[{originalUrl:"https://www.brasilgamesscoreboard.com.br/checkout/77e9f9d6-f194-4bc5-bc83-6311699c68a9",shortCode:"ingresso2025",title:"Comprar Ingresso - CERRADO INTERBÃ˜X 2025",description:"Link oficial para compra de ingressos do CERRADO INTERBÃ˜X 2025",category:"ingresso",isPublic:!0,isActive:!0},{originalUrl:"https://chat.whatsapp.com/FHTqm0l36kc7RWYWMw1Kiz",shortCode:"comunidade",title:"Comunidade WhatsApp - CERRADO INTERBÃ˜X",description:"Entre na comunidade oficial do WhatsApp do CERRADO INTERBÃ˜X 2025",category:"comunidade",isPublic:!0,isActive:!0},{originalUrl:"https://www.instagram.com/cerradointerbox",shortCode:"instagram",title:"Instagram - CERRADO INTERBÃ˜X",description:"Siga o CERRADO INTERBÃ˜X no Instagram para novidades",category:"midia",isPublic:!0,isActive:!0},{originalUrl:"https://www.facebook.com/cerradointerbox",shortCode:"facebook",title:"Facebook - CERRADO INTERBÃ˜X",description:"Curta a pÃ¡gina do CERRADO INTERBÃ˜X no Facebook",category:"midia",isPublic:!0,isActive:!0},{originalUrl:"https://www.youtube.com/@cerradointerbox",shortCode:"youtube",title:"YouTube - CERRADO INTERBÃ˜X",description:"Inscreva-se no canal do YouTube do CERRADO INTERBÃ˜X",category:"midia",isPublic:!0,isActive:!0}],H=async s=>{try{console.log("ğŸ”„ Criando links iniciais...");for(const o of O){if(!(await k(w(g(f,"shortLinks"),b("shortCode","==",o.shortCode)))).empty){console.log(`âš ï¸ Link ${o.shortCode} jÃ¡ existe, pulando...`);continue}const t={...o,shortUrl:v(o.shortCode),clickCount:0,uniqueVisitors:0,createdAt:u(),updatedAt:u(),createdBy:s,analytics:{totalClicks:0,clicksByDate:{},clicksByHour:{},clicksByDevice:{},clicksByCountry:{}}};await y(g(f,"shortLinks"),t),console.log(`âœ… Link criado: ${o.shortCode} -> ${o.originalUrl}`)}return console.log("ğŸ‰ Links iniciais criados com sucesso!"),!0}catch(o){return console.error("âŒ Erro ao criar links iniciais:",o),!1}},F=async(s,o,e,t,a,i="outro")=>{try{if(!(await k(w(g(f,"shortLinks"),b("shortCode","==",e)))).empty)return console.log(`âš ï¸ Link ${e} jÃ¡ existe`),!1;const c={originalUrl:o,shortCode:e,shortUrl:v(e),title:t||`Link ${e}`,description:a||`Link encurtado para ${o}`,category:i,isPublic:!0,isActive:!0,clickCount:0,uniqueVisitors:0,createdAt:u(),updatedAt:u(),createdBy:s,analytics:{totalClicks:0,clicksByDate:{},clicksByHour:{},clicksByDevice:{},clicksByCountry:{}}};return await y(g(f,"shortLinks"),c),console.log(`âœ… Link criado: ${e} -> ${o}`),!0}catch(n){return console.error("âŒ Erro ao criar link:",n),!1}};export{G as a,H as b,j as c,F as d,_ as e,S as g,z as i,X as s,q as u};
